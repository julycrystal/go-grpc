FROM node:19-alpine

ARG URI_USERS
ARG URI_NOTES
ARG GOOGLE_ID
ARG GOOGLE_SECRET

WORKDIR /client

COPY ./client /client
COPY ./proto /proto

RUN npm ci
RUN URI_USERS=$URI_USERS URI_NOTES=$URI_NOTES GOOGLE_ID=$GOOGLE_ID GOOGLE_SECRET=$GOOGLE_SECRET npm run build

CMD ["node", "build"]
